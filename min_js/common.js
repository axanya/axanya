function homeAutocomplete(){document.getElementById("location")&&(home_autocomplete=new google.maps.places.Autocomplete(document.getElementById("location")),home_autocomplete.addListener("place_changed",trigger_checkin)),document.getElementById("mob-search-location")&&(home_mob_autocomplete=new google.maps.places.Autocomplete(document.getElementById("mob-search-location")),google.maps.event.addListener(home_mob_autocomplete,"place_changed",function(){var e=$("#mob-search-location").val(),t=e.replace(" ","+");window.location.href=APP_URL+"/s?location="+t}))}function headerAutocomplete(){document.getElementById("header-search-form")&&(header_autocomplete=new google.maps.places.Autocomplete(document.getElementById("header-search-form")),google.maps.event.addListener(header_autocomplete,"place_changed",function(){$("#header-search-settings").addClass("shown"),$("#header-search-checkin").datepicker("show")})),document.getElementById("search-modal--sm")&&(sm_autocomplete=new google.maps.places.Autocomplete(document.getElementById("header-location--sm")),google.maps.event.addListener(sm_autocomplete,"place_changed",function(){$("#modal_checkin").datepicker("show")}))}function trigger_checkin(){$("#checkin").datepicker("show")}$(".js-show-how-it-works").click(function(){$(".js-how-it-works").slideToggle("fast",function(){$(".js-how-it-works").show()})}),$(".js-close-how-it-works").click(function(){$(".js-how-it-works").slideToggle("fast",function(){$(".js-how-it-works").hide()})}),$(".burger--sm").click(function(){$(".header--sm .nav--sm").css("visibility","visible"),$(".axanya-header .header--sm .nav-content--sm").css("left","0","important")}),$(".nav-mask--sm").click(function(){$(".header--sm .nav--sm").css("visibility","hidden"),$(".axanya-header .header--sm .nav-content--sm").css("left","-285px")}),$(".search-modal-trigger, #sm-search-field").click(function(){$("#search-modal--sm").removeClass("hide"),$("#search-modal--sm").attr("aria-hidden","false")}),$(".search-modal-container .modal-close").click(function(){$("#search-modal--sm").addClass("hide"),$("#search-modal--sm").attr("aria-hidden","true")}),homeAutocomplete();var home_autocomplete,home_mob_autocomplete,current_url=window.location.href,last_part=current_url.substr(current_url.lastIndexOf("/")),last_part1=current_url.substr(current_url.lastIndexOf("/")+1);last_part+last_part1[0]!="/s"&&headerAutocomplete();var header_autocomplete,sm_autocomplete;$("#header-search-checkin").datepicker({dateFormat:"dd-mm-yy",minDate:0,onSelect:function(e){var t=$("#header-search-checkin").datepicker("getDate");t.setDate(t.getDate()+1),$("#header-search-checkout").datepicker("setDate",t),$("#header-search-checkout").datepicker("option","minDate",t),setTimeout(function(){$("#header-search-checkout").datepicker("show")},20)}}),$("#header-search-checkout").datepicker({dateFormat:"dd-mm-yy",minDate:1,onClose:function(){var e=$("#checkin").datepicker("getDate"),t=$("#header-search-checkout").datepicker("getDate");if(e>=t){var a=$("#header-search-checkout").datepicker("option","minDate");$("#header-search-checkout").datepicker("setDate",a)}}}),$("#modal_checkin").datepicker({dateFormat:"dd-mm-yy",minDate:0,onSelect:function(e){var t=$("#modal_checkin").datepicker("getDate");t.setDate(t.getDate()+1),$("#modal_checkout").datepicker("setDate",t),$("#modal_checkout").datepicker("option","minDate",t),setTimeout(function(){$("#modal_checkout").datepicker("show")},20)}}),$("#modal_checkout").datepicker({dateFormat:"dd-mm-yy",minDate:1,onClose:function(){var e=$("#checkin").datepicker("getDate"),t=$("#modal_checkout").datepicker("getDate");if(e>=t){var a=$("#modal_checkout").datepicker("option","minDate");$("#modal_checkout").datepicker("setDate",a)}}}),$("#searchbar-form").submit(function(e){""==$("#location").val()?($(".searchbar__location-error").removeClass("hide"),e.preventDefault()):$(".searchbar__location-error").addClass("hide")}),$("#location, #header-location--sm").keyup(function(){$(".searchbar__location-error").addClass("hide")}),$(".search-form").submit(function(e){var t=$("#header-search-checkin").val(),a=$("#header-search-checkout").val(),o=$("#header-search-guests").val(),i="";$('[id^="header_room_type"]').each(function(){$(this).is(":checked")&&(i+=$(this).val()+",")}),i=i.slice(0,-1);var n=$("#header-search-form").val(),c=n.replace(" ","+");window.location.href=APP_URL+"/s?location="+c+"&checkin="+t+"&checkout="+a+"&guest="+o+"&room_type="+i,e.preventDefault()}),$("#search-form--sm-btn").click(function(e){var t=$("#header-location--sm").val();if(""==t)return $(".searchbar__location-error").removeClass("hide"),!1;$(".searchbar__location-error").addClass("hide");var a=$("#modal_checkin").val(),o=$("#modal_checkout").val(),i=$("#modal_guests").val(),n="";$('[id^="room-type-"]').each(function(){$(this).is(":checked")&&(n+=$(this).val()+",")}),n=n.slice(0,-1);var c=t.replace(" ","+");window.location.href=APP_URL+"/s?location="+c+"&checkin="+a+"&checkout="+o+"&guest="+i+"&room_type="+n,e.preventDefault()}),$("html").click(function(){$("#header-search-settings").removeClass("shown")}),$("#header-search-settings").click(function(e){e.stopPropagation()}),$("#checkin").datepicker({dateFormat:"dd-mm-yy",minDate:0,onSelect:function(e){var t=$("#checkin").datepicker("getDate");t.setDate(t.getDate()+1),$("#checkout").datepicker("setDate",t),$("#checkout").datepicker("option","minDate",t),setTimeout(function(){$("#checkout").datepicker("show")},20)}}),$("#checkout").datepicker({dateFormat:"dd-mm-yy",minDate:1,onClose:function(){var e=$("#checkin").datepicker("getDate"),t=$("#checkout").datepicker("getDate");if(e>=t){var a=$("#checkout").datepicker("option","minDate");$("#checkout").datepicker("setDate",a)}}}),app.controller("payment",["$scope","$http",function(e,t){$(".open-coupon-section-link").click(function(){$("#billing-table").addClass("coupon-section-open"),$("#restric_apply").hide()}),$(".cancel-coupon").click(function(){$("#billing-table").removeClass("coupon-section-open"),$("#restric_apply").show()}),$("#apply-coupon").click(function(){var e=$(".coupon-code-field").val();t.post(APP_URL+"/payments/apply_coupon",{coupon_code:e}).then(function(e){e.data.message?($("#coupon_disabled_message").show(),$("#coupon_disabled_message").text(e.data.message),$("#after_apply_remove").hide()):($("#coupon_disabled_message").hide(),$("#restric_apply").hide(),$("#after_apply").hide(),$("#after_apply_remove").show(),$("#after_apply_coupon").show(),$("#after_apply_amount").show(),$("#applied_coupen_amount").text(e.data.coupon_amount),$("#payment_total").text(e.data.coupen_applied_total),window.location.reload())})}),$("#remove_coupon").click(function(){t.post(APP_URL+"/payments/remove_coupon",{}).then(function(e){window.location.reload()})})}]),$("#payment-method-select").change(function(){"paypal"==$(this).val()?($("#payment-method-cc").hide(),$(".cc").hide(),$("."+$(this).val()).addClass("active"),$("."+$(this).val()).addClass("active"),$("."+$(this).val()+" > .payment-logo").removeClass("inactive")):($("#payment-method-cc").show(),$(".cc").show(),$(".paypal").removeClass("active"),$(".paypal > .payment-logo").addClass("inactive")),$('[name="payment_method"]').val($(this).val())}),$("#country-select").change(function(){$("#billing-country").text($("#country-select option:selected").text()),$('[name="country"]').val($(this).val())}),$("#billing-country").text($("#country-select option:selected").text()),$('[name="country"]').val($("#country-select option:selected").val()),app.controller("footer",["$scope","$http",function(e,t){$("#currency_footer").change(function(){t.post(APP_URL+"/set_session",{currency:$(this).val()}).then(function(e){location.reload()})}),$("#language_footer").change(function(){t.post(APP_URL+"/set_session",{language:$(this).val()}).then(function(e){location.reload()})}),$(".room_status_dropdown").change(function(){var e={};e.status=$(this).val();var a=JSON.stringify(e),o=$(this).attr("data-room-id");t.post("manage-listing/"+o+"/update_rooms",{data:a}).then(function(t){"Unlisted"==e.status?($('[data-room-id="div_'+o+'"] > i').addClass("dot-danger"),$('[data-room-id="div_'+o+'"] > i').removeClass("dot-success")):"Listed"==e.status&&($('[data-room-id="div_'+o+'"] > i').removeClass("dot-danger"),$('[data-room-id="div_'+o+'"] > i').addClass("dot-success"))})}),$(document).on("click",".wl-modal-footer__text",function(){$(".wl-modal-footer__form").removeClass("hide")}),$("#send-email").unbind("click").click(function(){var e=$("#email-list").val();""!=e&&t.post("invite/share_email",{emails:e}).then(function(e){$("#success_message").fadeIn(),$("#success_message").fadeOut(),$("#email-list").val("")})})}]),app.controller("payout_preferences",["$scope","$http",function(e,t){$("#add-payout-method-button").click(function(){$("#payout_popup1").removeClass("hide")}),$("#address").submit(function(){var e='<div class="alert alert-error alert-error alert-header"><a class="close alert-close" href="javascript:void(0);"></a><i class="icon alert-icon icon-alert-alt"></i>';return""==$("#payout_info_payout_address1").val()?($("#popup1_flash-container").append(e+"Address cannot be blank.</div>"),!1):""==$("#payout_info_payout_city").val()?($("#popup1_flash-container").html(e+"City cannot be blank.</div>"),!1):""==$("#payout_info_payout_zip").val()?($("#popup1_flash-container").html(e+"Postal Code cannot be blank.</div>"),!1):null==$("#payout_info_payout_country").val()?($("#popup1_flash-container").html(e+"Country cannot be blank.</div>"),!1):($("#payout_info_payout2_address1").val($("#payout_info_payout_address1").val()),$("#payout_info_payout2_address2").val($("#payout_info_payout_address2").val()),$("#payout_info_payout2_city").val($("#payout_info_payout_city").val()),$("#payout_info_payout2_state").val($("#payout_info_payout_state").val()),$("#payout_info_payout2_zip").val($("#payout_info_payout_zip").val()),$("#payout_info_payout2_country").val($("#payout_info_payout_country").val()),$("#payout_popup1").addClass("hide"),void $("#payout_popup2").removeClass("hide"))}),$("#select-payout-method-submit").click(function(){var e='<div class="alert alert-error alert-error alert-header"><a class="close alert-close" href="javascript:void(0);"></a><i class="icon alert-icon icon-alert-alt"></i>';return void 0==$('[id="payout2_method"]:checked').val()?($("#popup2_flash-container").html(e+"Choose Payout Method.</div>"),!1):($("#payout_info_payout3_address1").val($("#payout_info_payout2_address1").val()),$("#payout_info_payout3_address2").val($("#payout_info_payout2_address2").val()),$("#payout_info_payout3_city").val($("#payout_info_payout2_city").val()),$("#payout_info_payout3_state").val($("#payout_info_payout2_state").val()),$("#payout_info_payout3_zip").val($("#payout_info_payout2_zip").val()),$("#payout_info_payout3_country").val($("#payout_info_payout2_country").val()),$("#payout3_method").val($("#payout2_method").val()),$("#payout_popup2").addClass("hide"),void $("#payout_popup3").removeClass("hide"))}),$(".panel-close").click(function(){$(this).parent().parent().parent().parent().parent().addClass("hide")}),$('[id$="_flash-container"]').on("click",".alert-close",function(){$(this).parent().parent().html("")})}]),app.directive("postsPaginationTransaction",function(){return{restrict:"E",template:'<ul class="pagination"><h3 class="status-text text-center" ng-show="loading">Loading...</h3><h3 class="status-text text-center" ng-hide="result.length">No Transactions</h3><li ng-show="currentPage != 1"><a href="javascript:void(0)" ng-click="pagination_result(type, 1)">&laquo;</a></li><li ng-show="currentPage != 1"><a href="javascript:void(0)" ng-click="pagination_result(type, currentPage-1)">&lsaquo; Prev</a></li><li ng-repeat="i in range" ng-class="{active : currentPage == i}"><a href="javascript:void(0)" ng-click="pagination_result(type, i)">{{i}}</a></li><li ng-show="currentPage != totalPages"><a href="javascript:void(0)" ng-click="pagination_result(type, currentPage+1)">Next &rsaquo;</a></li><li ng-show="currentPage != totalPages"><a href="javascript:void(0)" ng-click="pagination_result(type, totalPages)">&raquo;</a></li></ul>'}}).controller("transaction_history",["$scope","$http",function(e,t){e.paid_out=0,$("li > .tab-item").click(function(){var t=$(this).attr("aria-controls"),a=$(this).attr("aria-selected");"false"==a&&($(".tab-item").attr("aria-selected","false"),$(this).attr("aria-selected","true"),$(".tab-panel").hide(),$("#"+t).show()),e.type=t,e.pagination_result(t,1)}),$('[class^="payout-"]').change(function(){var t=$(this).parent().parent().parent().parent().attr("id");e.type=t,e.pagination_result(t,1)}),e.pagination_result=function(a,o){var i={};i.type=a,i.payout_method=$("#"+i.type+" .payout-method").val(),i.listing=$("#"+i.type+" .payout-listing").val(),i.year=$("#"+i.type+" .payout-year").val(),i.start_month=$("#"+i.type+" .payout-start-month").val(),i.end_month=$("#"+i.type+" .payout-end-month").val();var n=JSON.stringify(i);void 0==o&&(o=1),"completed-transactions"==a&&(e.completed_csv_param="type="+i.type+"&payout_method="+i.payout_method+"&listing="+i.listing+"&year="+i.year+"&start_month="+i.start_month+"&end_month="+i.end_month+"&page="+o),"future-transactions"==a&&(e.future_csv_param="type="+i.type+"&payout_method="+i.payout_method+"&listing="+i.listing+"&page="+o),e.result_show=!1,e.loading=!0,t.post(APP_URL+"/users/result_transaction_history?page="+o,{data:n}).then(function(t){e.loading=!1,e.result=t.data.data,e.result.length&&(e.result_show=!0),e.totalPages=t.data.last_page,e.currentPage=t.data.current_page,e.type=a;for(var o=[],i=1;i<=t.data.last_page;i++)o.push(i);e.range=o;for(var n=0,i=0;i<e.result.length;i++)n+=e.result[i].amount;e.paid_out=e.result[0].currency_symbol+n})},e.pagination_result("completed-transactions",1)}]),app.controller("reviews",["$scope","$http",function(e,t){$("li > .tab-item").click(function(){var e=$(this).attr("aria-controls"),t=$(this).attr("aria-selected");"false"==t&&($(".tab-item").attr("aria-selected","false"),$(this).attr("aria-selected","true"),$(".tab-panel").hide(),$("#"+e).show())})}]),app.controller("help",["$scope","$http",function(e,t){$(".navtree-list .navtree-next").click(function(){var e=$(this).data("id"),t=$(this).data("name");$("#navtree").css({left:"-300px"}),$(".subnav-list li:first-child a").attr("aria-selected","false"),$(".subnav-list li").append('<li> <a class="subnav-item" href="#" data-node-id="0" aria-selected="true"> '+t+" </a> </li>"),$("#navtree-"+e).css({display:"block"})}),$(".navtree-list .navtree-back").click(function(){var e=$(this).data("id");$(this).data("name");$("#navtree").css({left:"0px"}),$(".subnav-list li:first-child a").attr("aria-selected","true"),$(".subnav-list li").last().remove(),$("#navtree-"+e).css({display:"none"})}),$("#help_search").autocomplete({source:function(e,t){$.ajax({url:APP_URL+"/ajax_help_search",type:"GET",dataType:"json",data:{term:e.term},success:function(e){t(e)}})},search:function(){$(this).addClass("loading")},open:function(){$(this).removeClass("loading")}}).autocomplete("instance")._renderItem=function(e,t){return $("<li>").append("<a href='"+APP_URL+"/help/article/"+t.id+"/"+t.question+"' class='article-link article-link-panel link-reset'><div class='hover-item__content'><div class='col-middle-alt article-link-left'><i class='icon icon-light-gray icon-size-2 article-link-icon icon-description'></i></div><div class='col-middle-alt article-link-right'>"+t.value+"</div></div></a>").appendTo(e)}}]),app.controller("reviews_edit_host",["$scope","$http",function(e,t){$(".next-facet").click(function(){$("#double-blind-copy").addClass("hide"),$("#host-summary").removeClass("hide"),$("#guest").removeClass("hide")}),$(".review_submit").click(function(){var e=$(this).parent().parent().attr("id"),a={};$("#"+e+"-form input, #"+e+" textarea").each(function(){"radio"!=$(this).attr("type")?a[$(this).attr("name")]=$(this).val():$(this).is(":checked")&&(a[$(this).attr("name")]=$(this).val())});var o=$("#reservation_id").val();if("host-summary"==e||"guest"==e){if(""==$("#review_comments").val())return $('[for="review_comments"]').show(),$("#review_comments").addClass("invalid"),!1;if($('[for="review_comments"]').hide(),$("#review_comments").removeClass("invalid"),"host-summary"==e){if(!$('[name="rating"]').is(":checked"))return $('[for="review_rating"]').show(),!1;$('[for="review_rating"]').hide()}}a.review_id=$("#review_id").val();var i=JSON.stringify(a);$(".review-container").addClass("loading"),t.post(APP_URL+"/reviews/edit/"+o,{data:i}).then(function(t){$(".review-container").removeClass("loading"),t.data.success&&("host-details"!=e&&"guest"!=e||(window.location.href=APP_URL+"/users/reviews"),$("#review_id").val(t.data.review_id),$("#"+e).addClass("hide"),$("#"+e).next().removeClass("hide"))})})}]),$(document).on("change","#user_profile_pic",function(){$("#ajax_upload_form").submit()}),$(document).ready(function(){$("[id$='-trigger']").click(function(){var e=$(this).attr("id").replace("-trigger","");$("#reserve_code").val(e),$("#reserve_id").val(e);var t="#cancel-modal";$(t).removeClass("hide"),$(t).addClass("show"),$(t).attr("aria-hidden","false")}),$('[data-behavior="modal-close"]').click(function(e){e.preventDefault(),$(".modal").removeClass("show"),$(".modal").attr("aria-hidden","true")})});