

<?php $__env->startSection('main'); ?>
    <main id="site-content" role="main">
    <?php echo $__env->make('common.subheader', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>
  <div class="page-container-responsive space-top-4 space-4">
    <div class="row">
      <div class="col-md-3">
        <?php echo $__env->make('common.sidenav', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>
      </div>
      <div class="col-md-9">
      <?php if($pending_trips->count() == 0 && $current_trips->count() == 0 && $upcoming_trips->count() == 0): ?>
        <div class="panel">
    <div class="panel-header">
      <?php echo e(trans('messages.header.your_trips')); ?>

    </div>
    <div class="panel-body">
      <p>
        <?php echo e(trans('messages.your_trips.no_current_trips')); ?>

      </p>
      <div class="row">
        <div class="col-8">
          <form method="get" class="row" action="<?php echo e(url()); ?>/s" accept-charset="UTF-8"><div style="margin:0;padding:0;display:inline"><input type="hidden" value="✓" name="utf8"></div>
  <div class="col-8">
    <input type="text" placeholder="<?php echo e(trans('messages.header.where_are_you_going')); ?>" name="location" id="location" autocomplete="off" class="location">
  </div>
  <div class="col-4">
    <button id="submit_location" class="btn btn-primary" type="submit">
      <?php echo e(trans('messages.home.search')); ?>

    </button>
  </div>
</form>
        </div>
      </div>
    </div>
  </div>
  <?php endif; ?>
  <?php if($pending_trips->count() > 0): ?>
  <div class="panel row-space-4">
    <div class="panel-header">
      <?php echo e(trans('messages.your_trips.pending_trips')); ?>

    </div>
    <div class="table-responsive">
      <table class="table panel-body panel-light">
        <tbody><tr>
          <th><?php echo e(trans('messages.your_reservations.status')); ?></th>
          <th><?php echo e(trans('messages.your_trips.location')); ?></th>
          <th><?php echo e(trans('messages.your_trips.host')); ?></th>
          <th><?php echo e(trans('messages.your_trips.dates')); ?></th>
          <th><?php echo e(trans('messages.your_trips.options')); ?></th>
        </tr>
        <?php foreach($pending_trips as $pending_trip): ?>
            <tr>
      <td class="status">
        <span class="label label-orange label-<?php echo e($pending_trip->status_color); ?>">
          <?php echo e($pending_trip->status); ?>

        </span>
        <br>
      </td>
      <td class="location">
        <a href="<?php echo e(url()); ?>/rooms/<?php echo e($pending_trip->room_id); ?>"><?php echo e($pending_trip->rooms->name); ?></a>
        <br>
        <?php echo e($pending_trip->rooms->rooms_address->city); ?>

      </td>
      <td class="host"><a href="<?php echo e(url()); ?>/users/show/<?php echo e($pending_trip->host_id); ?>"><?php echo e($pending_trip->rooms->users->full_name); ?></a></td>
      <td class="dates"><?php echo e($pending_trip->dates); ?></td>

      <td>
      <ul class="unstyled button-list list-unstyled">
        <li class="row-space-1">
        <a class="button-steel" href="<?php echo e(url()); ?>/z/q/<?php echo e($pending_trip->id); ?>"><?php echo e(trans('messages.your_reservations.message_history')); ?></a>
        </li>
        <li class="row-space-1">
        <!-- <a target="_blank" rel="nofollow" data-method="post" data-confirm="Are you sure that you want to cancel the request? Any money transacted will be refunded." class="button-steel" href="<?php echo e(url()); ?>/reservation/cancel?code=<?php echo e($pending_trip->code); ?>"><?php echo e(trans('messages.your_trips.cancel_request')); ?></a> -->
        <a rel="nofollow" data-method="post" data-confirm="Are you sure that you want to cancel the request? Any money transacted will be refunded." id="<?php echo e($pending_trip->id); ?>-trigger" class="button-steel" href="#"><?php echo e(trans('messages.your_trips.cancel_request')); ?></a>
        </li>
      </ul>
    </td>
    </tr>
    <?php endforeach; ?>
    </tbody>
    </table>
    </div>
  </div>
  <?php endif; ?>
  <?php if($current_trips->count() > 0): ?>
  <div class="panel row-space-4">
    <div class="panel-header">
      <?php echo e(trans('messages.your_trips.current_trips')); ?>

    </div>
    <div class="table-responsive">
      <table class="table panel-body panel-light">
        <tbody><tr>
          <th><?php echo e(trans('messages.your_reservations.status')); ?></th>
          <th><?php echo e(trans('messages.your_trips.location')); ?></th>
          <th><?php echo e(trans('messages.your_trips.host')); ?></th>
          <th><?php echo e(trans('messages.your_trips.dates')); ?></th>
          <th><?php echo e(trans('messages.your_trips.options')); ?></th>
        </tr>
        <?php foreach($current_trips as $current_trip): ?>
            <tr>
      <td class="status">
        <span class="label label-orange label-<?php echo e($current_trip->status_color); ?>">
          <?php echo e($current_trip->status); ?>

        </span>
        <br>
      </td>
      <td class="location">
        <a href="<?php echo e(url()); ?>/rooms/<?php echo e($current_trip->room_id); ?>"><?php echo e($current_trip->rooms->name); ?></a>
        <br>
        <?php echo e($current_trip->rooms->rooms_address->city); ?>

      </td>
      <td class="host"><a href="<?php echo e(url()); ?>/users/show/<?php echo e($current_trip->host_id); ?>"><?php echo e($current_trip->rooms->users->full_name); ?></a></td>
      <td class="dates"><?php echo e($current_trip->dates); ?></td>

      <td>
      <ul class="unstyled button-list list-unstyled">
        <li class="row-space-1">
        <a class="button-steel" href="<?php echo e(url()); ?>/z/q/<?php echo e($current_trip->id); ?>"><?php echo e(trans('messages.your_reservations.message_history')); ?></a>
        </li>
        <?php if($current_trip->status != "Cancelled" && $current_trip->status != "Declined" && $current_trip->status != "Expired"): ?>
        <li class="row-space-1">
        <a class="button-steel" href="<?php echo e(url()); ?>/reservation/itinerary?code=<?php echo e($current_trip->code); ?>"><?php echo e(trans('messages.your_trips.view_itinerary')); ?></a>
        </li>
        <li class="row-space-1">
        <a class="button-steel" href="<?php echo e(url()); ?>/reservation/receipt?code=<?php echo e($current_trip->code); ?>"><?php echo e(trans('messages.your_trips.view_receipt')); ?></a>
        </li>
        <li class="row-space-1">
        <a class="button-steel" href="#" id="<?php echo e($current_trip->id); ?>-trigger"><?php echo e(trans('messages.your_reservations.cancel')); ?></a>
        </li>
        <?php endif; ?>
      </ul>
    </td>
    </tr>
    <?php endforeach; ?>
    </tbody>
    </table>
    </div>
  </div>
  <?php endif; ?>
  <?php if($upcoming_trips->count() > 0): ?>
  <div class="panel row-space-4">
    <div class="panel-header">
      <?php echo e(trans('messages.your_trips.upcoming_trips')); ?>

    </div>
    <div class="table-responsive">
      <table class="table panel-body panel-light">
        <tbody><tr>
          <th><?php echo e(trans('messages.your_reservations.status')); ?></th>
          <th><?php echo e(trans('messages.your_trips.location')); ?></th>
          <th><?php echo e(trans('messages.your_trips.host')); ?></th>
          <th><?php echo e(trans('messages.your_trips.dates')); ?></th>
          <th><?php echo e(trans('messages.your_trips.options')); ?></th>
        </tr>
        <?php foreach($upcoming_trips as $upcoming_trip): ?>
            <tr>
      <td class="status">
        <span class="label label-orange label-<?php echo e($upcoming_trip->status_color); ?>">
          <?php echo e($upcoming_trip->status); ?>

        </span>
        <br>
      </td>
      <td class="location">
        <a href="<?php echo e(url()); ?>/rooms/<?php echo e($upcoming_trip->room_id); ?>"><?php echo e($upcoming_trip->rooms->name); ?></a>
        <br>
        <?php echo e($upcoming_trip->rooms->rooms_address->city); ?>

      </td>
      <td class="host"><a href="<?php echo e(url()); ?>/users/show/<?php echo e($upcoming_trip->host_id); ?>"><?php echo e($upcoming_trip->rooms->users->full_name); ?></a></td>
      <td class="dates"><?php echo e($upcoming_trip->dates); ?></td>

      <td>
      <ul class="unstyled button-list list-unstyled">
        <li class="row-space-1">
        <a class="button-steel" href="<?php echo e(url()); ?>/z/q/<?php echo e($upcoming_trip->id); ?>"><?php echo e(trans('messages.your_reservations.message_history')); ?></a>
        </li>
        <?php if($upcoming_trip->status != "Cancelled"): ?>
        <li class="row-space-1">
        <a class="button-steel" href="<?php echo e(url()); ?>/reservation/itinerary?code=<?php echo e($upcoming_trip->code); ?>"><?php echo e(trans('messages.your_trips.view_itinerary')); ?></a>
        </li>
        <li class="row-space-1">
        <a class="button-steel" href="<?php echo e(url()); ?>/reservation/receipt?code=<?php echo e($upcoming_trip->code); ?>"><?php echo e(trans('messages.your_trips.view_receipt')); ?></a>
        </li>
        <li class="row-space-1">
        <a class="button-steel" href="#" id="<?php echo e($upcoming_trip->id); ?>-trigger"><?php echo e(trans('messages.your_reservations.cancel')); ?></a>
        </li>
         <?php endif; ?>
      </ul>
    </td>
    </tr>
    <?php endforeach; ?>
    </tbody>
    </table>
    </div>
  </div>
  <?php endif; ?>

    </div>
      
    </div>
  </div>
   <?php if($upcoming_trips->count() > 0 || $current_trips->count() > 0): ?>
  <div class="modal" role="dialog" id="cancel-modal" aria-hidden="true">
  <div class="modal-table">
    <div class="modal-cell">
      <div class="modal-content">
        <form accept-charset="UTF-8" action="<?php echo e(url('trips/guest_cancel_reservation')); ?>" id="cancel_reservation_form" method="post" name="cancel_reservation_form">
        <?php echo Form::token(); ?>

          <div class="panel-header">
            <a href="#" class="modal-close" data-behavior="modal-close"></a>
            <?php echo e(trans('messages.your_reservations.cancel_this_reservation')); ?>

          </div>
          <div class="panel-body">
            <div id="decline_reason_container">
              <p>
                <?php echo e(trans('messages.your_reservations.reason_cancel_reservation')); ?>

              </p>
              <p>
                <strong>
                  <?php echo e(trans('messages.your_trips.response_not_shared_host')); ?>

                </strong>
              </p>
              <div class="select">
                <select id="cancel_reason" name="cancel_reason"><option value="">Why are you declining?</option>
<option value="no_longer_need_accommodations">I no longer need accommodations</option>
<option value="travel_dates_changed">My travel dates changed</option>
<option value="made_the_reservation_by_accident">I made the reservation by accident</option>
<option value="I_have_an_extenuating_circumstance">I have an extenuating circumstance</option>
<option value="my_host_needs_to_cancel">My host needs to cancel</option>
<option value="uncomfortable_with_the_host">I’m uncomfortable with the host</option>
<option value="place_not_okay">The place isn't what I was expecting</option>
<option value="other">Other</option></select>
              </div>

              <div id="cancel_reason_other_div" class="hide row-space-top-2">
                <label for="cancel_reason_other">
                  <?php echo e(trans('messages.your_reservations.why_cancel')); ?>

                </label>
                <textarea id="decline_reason_other" name="decline_reason_other" rows="4"></textarea>
              </div>
             
            </div>

            <label for="cancel_message" class="row-space-top-2">
              <?php echo e(trans('messages.your_trips.type_msg_host')); ?>...
            </label>
            <textarea cols="40" id="cancel_message" name="cancel_message" rows="10"></textarea>
            <input type="hidden" name="id" id="reserve_code" value="">
          </div>
          <div class="panel-footer">
            <input type="hidden" name="decision" value="decline">
            <input class="btn btn-primary" id="cancel_submit" name="commit" type="submit" value="Cancel My Reservation">
            <button class="btn" data-behavior="modal-close">
              <?php echo e(trans('messages.home.close')); ?>

            </button>
          </div>
</form>      </div>
    </div>
  </div>
</div>
<?php endif; ?>
</main>

<?php $__env->stopSection(); ?>


<?php echo $__env->make('template', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>